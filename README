# export collections from zotero
# do not change or remove the .md files, except list_of_publications.md

rm list_of_publications.md

echo "# Preprints" > list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  preprints.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, A. J./**Nederbragt, A. J.**/g' >> list_of_publications.md

echo "# Peer-reviewed publications"
echo "# Peer-reviewed publications" >> list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  peer-reviewed.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, A. J./**Nederbragt, A. J.**/g' | sed 's/Nederbragt, L./**Nederbragt, L.**/g' >> list_of_publications.md

echo "# Thesis"
echo "# Thesis" >> list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  thesis.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, A. J./**Nederbragt, A. J.**/g' >> list_of_publications.md

echo "# Book chapters"
echo "# Book chapters" >> list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  book-chapters.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, A. J./**Nederbragt, A. J.**/g' >> list_of_publications.md

echo "# Software publications"
echo "# Software publications" >> list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  software.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, A. J/**Nederbragt, A. J**/g' >> list_of_publications.md

echo "# Published lesson materials"
echo "# Published lesson materials" >> list_of_publications.md && \
pandoc -S --filter pandoc-citeproc  lesson-materials.md  | pandoc -t markdown_github |sed 's/<p>//g' | sed 's/<\/p>//g' | sed 's/Nederbragt, L./**Nederbragt, L.**/g' >> list_of_publications.md

echo "# Creating PDF"
# added workaround for "Argument of \paragraph has an extra }." error
# as per https://stackoverflow.com/questions/42916124/not-able-to-use-titlesec-with-markdown-and-pandoc
pandoc --variable subparagraph -S -H format.sty -V fontsize=12pt -o list_of_publications.pdf --filter pandoc-citeproc  list_of_publications.md && open list_of_publications.pdf
